{"id":"rpc.do-032","title":"Add performance benchmarks","description":"Create benchmark suite comparing rpc.do vs tRPC vs plain fetch. Measure: latency, throughput, bundle size, memory usage. Publish results in README or separate doc.","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-25T01:30:10.44045-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-25T03:23:21.254673-06:00","closed_at":"2026-01-25T03:23:21.254673-06:00","close_reason":"Work completed in previous session","external_ref":"gh-18","labels":["docs","performance"]}
{"id":"rpc.do-0ok","title":"GREEN: Add server.ts WebSocket explicit tests","description":"Add explicit tests for server.ts WebSocket handling. Currently tested indirectly. Test: WebSocket upgrade (status 101), WebSocketPair handling, message dispatch error handling, custom auth middleware integration","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-24T17:29:30.194229-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-25T03:23:21.258606-06:00","closed_at":"2026-01-25T03:23:21.258606-06:00","close_reason":"Work completed in previous session","external_ref":"gh-14","labels":["green","tdd","testing"]}
{"id":"rpc.do-0oy","title":"Add Why rpc.do section with benchmarks","description":"Documentation lacks compelling 'why' section. Add:\n1. Problem statement (RPC is complex, bundles are large)\n2. Solution (3KB, zero codegen, transport-agnostic)\n3. Actual benchmark data vs tRPC, gRPC-Web\n4. Use case matrix (when to use rpc.do vs alternatives)\n\nInclude:\n- Bundle size chart (visual)\n- Feature comparison table\n- Performance benchmarks (requests/sec, latency)","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","estimated_minutes":240,"created_at":"2026-02-02T05:23:41.463474-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T07:40:11.4533-06:00","closed_at":"2026-02-02T07:40:11.4533-06:00","close_reason":"Closed","labels":["docs","marketing"]}
{"id":"rpc.do-0uc","title":"GREEN: Add error classes explicit tests","description":"Add explicit tests for src/errors.ts. Currently tested indirectly (~40% coverage). Test: stack trace capture (Error.captureStackTrace), custom error serialization, instanceof checks, all static factory methods","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-24T17:29:31.579495-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-24T17:43:18.102771-06:00","closed_at":"2026-01-24T17:43:18.102771-06:00","close_reason":"Tests implemented and passing","labels":["green","tdd","testing"]}
{"id":"rpc.do-1e0","title":"Fix wrapTransportError fragile string matching","description":"src/transports.ts:61-113 - Error classification uses message.includes('401'), includes('429') etc. False positives possible (e.g. 'processed 401 records' misclassified as auth failure). Use word boundary regex or check HTTP status code directly if available.","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:53:44.341695-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T06:56:37.993655-06:00","closed_at":"2026-02-02T06:56:37.993655-06:00","close_reason":"Closed"}
{"id":"rpc.do-1hj","title":"Extract core types to src/types.ts to fix circular deps","description":"index.ts \u003c-\u003e transports.ts and index.ts \u003c-\u003e do-client.ts have circular type imports. Transport, TransportFactory, RpcProxy, RpcClientMiddleware are defined in index.ts but logically belong lower. Extract to src/types.ts and re-export from index.ts.","status":"closed","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:53:18.22892-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T07:43:29.256925-06:00","closed_at":"2026-02-02T07:43:29.256925-06:00","close_reason":"Closed"}
{"id":"rpc.do-1tt","title":"Stabilize flaky CLI-source tests","description":"tests/cli-source.test.ts and cli-source-factory.test.ts spawn child processes (500-1000ms each) and showed 7 transient failures. Add retry logic, increase per-test timeout, or use CI-aware timeouts. Also extract watch-mode test (line 1112) into separate slow-test suite.","status":"closed","priority":2,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:57:27.944986-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T08:02:07.29051-06:00","closed_at":"2026-02-02T08:02:07.29051-06:00","close_reason":"Closed"}
{"id":"rpc.do-1yq","title":"Fix installation: make @dotdo/capnweb a regular dependency","description":"npm install rpc.do does not produce a working setup. @dotdo/capnweb is listed as peerDependency but is required for http() and capnweb() transports. Either make it a regular dependency or prominently document installation in README. This is the #1 adoption blocker.","status":"closed","priority":0,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:55:57.348266-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T07:45:31.562796-06:00","closed_at":"2026-02-02T07:45:31.562796-06:00","close_reason":"Closed"}
{"id":"rpc.do-238","title":"RED: Tests for --source flag type extraction in CLI","description":"Write failing tests for npx rpc.do generate --source ./MyDO.ts that extracts full TypeScript types using ts-morph.\n\nTests should verify:\n1. CLI accepts --source flag with path to DO source file\n2. ts-morph parses the source file and finds DO class\n3. Extracts method signatures with full param and return types\n4. Extracts namespace objects with their methods\n5. Generates .do/*.d.ts files with proper type definitions\n6. Handles imported types (User, CreateUserInput, etc.)\n7. Handles generic collections Collection\u003cT\u003e\n8. Excludes private methods (starting with _)\n9. Excludes system methods (fetch, alarm, etc.)\n10. Watch mode regenerates on file changes\n\nReference: TYPED-RPC-ARCHITECTURE.md in rpc/ folder","status":"closed","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-25T08:43:37.658913-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T17:37:38.850584-06:00","closed_at":"2026-02-01T17:37:38.850584-06:00","close_reason":"Completed","external_ref":"gh-52"}
{"id":"rpc.do-28g","title":"Extract Transport interface to shared types package","description":"Transport interface is defined in rpc.do src/index.ts but @dotdo/types has MinimalTransport. The rpc.do Transport uses {call, close?} while @dotdo/types has a full lifecycle interface. Consider: 1) Move Transport to @dotdo/types, 2) Have rpc.do extend MinimalTransport, or 3) Add compatibility layer. Currently leads to type mismatches when mixing packages.","status":"open","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T05:22:44.753161-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T05:22:44.753161-06:00"}
{"id":"rpc.do-2i3","title":"Add interactive CLI wizard for project setup","description":"The CLI is zero-config but lacks interactive guidance for new users. Add:\n\nnpx rpc.do init\n  \u003e Project name: my-rpc-app\n  \u003e Template: [todo, chat, dashboard, blank]\n  \u003e TypeScript: [yes, no]\n  \u003e Package manager: [npm, pnpm, yarn]\n\nShould:\n- Create project structure\n- Install dependencies\n- Generate example DO\n- Set up wrangler.toml\n- Create typed client\n\nReference: create-t3-app for inspiration","status":"open","priority":2,"issue_type":"feature","owner":"4130910+nathanclevenger@users.noreply.github.com","estimated_minutes":360,"created_at":"2026-02-02T05:23:45.456349-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T05:23:45.456349-06:00","labels":["cli","dx"]}
{"id":"rpc.do-2rb","title":"POC: Snippet RPC Proxy for persistent WS","description":"Experiment with snippets holding persistent WebSocket connections:\n\nQuestions to answer:\n1. Can a snippet maintain a WS connection across multiple invocations?\n2. Can snippets batch messages to reduce connection overhead?\n3. What's the cost model for persistent WS in snippets?\n\nPOC implementation:\n- Create a snippet that opens a WS to a DO\n- Test if the WS survives across snippet invocations\n- Measure latency vs fresh connections\n- Test message batching patterns","status":"closed","priority":1,"issue_type":"feature","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-25T04:16:11.098132-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T04:48:49.230955-06:00","closed_at":"2026-02-02T04:48:49.230955-06:00","close_reason":"POC complete in experiments/snippet-rpc-proxy/","external_ref":"gh-49"}
{"id":"rpc.do-3e4","title":"Remove unused request param from handleWebSocketUpgrade","description":"core/src/index.ts:773 and core/src/lite.ts:184 - handleWebSocketUpgrade(request: Request) accepts request but never uses it. Either use it (origin validation, auth header extraction) or remove the parameter.","status":"closed","priority":3,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:54:09.078456-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T07:16:23.404656-06:00","closed_at":"2026-02-02T07:16:23.404656-06:00","close_reason":"Closed"}
{"id":"rpc.do-3u9","title":"Consolidate middleware implementations between client and server","description":"Client middleware (src/middleware/) and server middleware (core/src/middleware.ts) have different interfaces and implementations. Client middleware uses onRequest/onResponse/onError hooks, server middleware uses the same but with different context. Consider: 1) Unified middleware interface, 2) Shared base types, 3) Middleware that works on both sides with adapter pattern.","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T05:22:46.259772-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T05:31:39.725511-06:00","closed_at":"2026-02-02T05:31:39.725511-06:00","close_reason":"Created MIDDLEWARE_ANALYSIS.md and shared base types in src/middleware/types.ts"}
{"id":"rpc.do-4jo","title":"TS: Export missing types from public API","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T05:23:44.913456-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T06:32:55.718929-06:00","closed_at":"2026-02-02T06:32:55.718929-06:00","close_reason":"Closed"}
{"id":"rpc.do-4o6","title":"Fix duplicate event listener registration on WS reconnect","description":"src/transports/reconnecting-ws.ts:369 - Each connect() call creates new bound functions via .bind(this) and registers them. Old listeners aren't properly removed. Store bound handlers as instance properties created once in constructor.","status":"closed","priority":1,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:53:15.667273-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T07:09:39.780092-06:00","closed_at":"2026-02-02T07:09:39.780092-06:00","close_reason":"Closed","labels":["rpc.do-82f"]}
{"id":"rpc.do-4qn","title":"Reduce code duplication between core/src/index.ts and lite.ts","description":"core/src/lite.ts duplicates ~200 lines from index.ts including fetch(), handleWebSocketUpgrade(), webSocketMessage/Close/Error(), handleHttpRpc(), broadcast(), getSchema(). Extract shared logic into a base mixin. lite.ts getSchema() also reimplements introspection inline instead of using introspection.ts.","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:53:39.666195-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T08:18:28.335068-06:00","closed_at":"2026-02-02T08:18:28.335068-06:00","close_reason":"Closed"}
{"id":"rpc.do-4qs","title":"Document middleware system with examples","description":"Middleware exists (withMiddleware, retry) but is not documented. Add:\n\n1. Middleware concept explanation\n2. Built-in middleware list (logging, timing, retry)\n3. Custom middleware creation guide\n4. Server-side middleware hooks\n5. Example: authentication middleware\n6. Example: caching middleware\n7. Example: rate limiting middleware\n\nLocation: docs/MIDDLEWARE.md","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","estimated_minutes":180,"created_at":"2026-02-02T05:23:47.958245-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T07:43:26.585875-06:00","closed_at":"2026-02-02T07:43:26.585875-06:00","close_reason":"Closed","labels":["docs","middleware"]}
{"id":"rpc.do-4zv","title":"Document and formalize the package boundary between rpc.do and @dotdo/rpc","description":"Currently: rpc.do is the client SDK (browser-safe), @dotdo/rpc is the server SDK (DO base class). However: 1) Both have middleware, 2) Both define similar types, 3) Dependencies flow in unclear ways. Need: 1) Clear dependency diagram, 2) Explicit contract between packages, 3) Decision on what should be in a shared @dotdo/rpc-core package.","status":"closed","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T05:22:50.325874-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T05:30:09.304239-06:00","closed_at":"2026-02-02T05:30:09.304239-06:00","close_reason":"Created PACKAGE_BOUNDARY.md documenting package boundaries, updated README.md with Package Architecture section"}
{"id":"rpc.do-4zw","title":"Rewrite README to lead with DO value proposition","description":"Current README positions rpc.do as generic 'lightweight transport-agnostic RPC' which competes with dozens of libraries. The real differentiator is remote access to CF Durable Object internals (SQL, storage, collections). Lead with $.sql and $.collection examples. Show the 'same API locally and remotely' story.","status":"closed","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:56:04.365914-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T07:40:11.361853-06:00","closed_at":"2026-02-02T07:40:11.361853-06:00","close_reason":"Closed"}
{"id":"rpc.do-53f","title":"Split cli.ts into separate command modules","description":"src/cli.ts is 730+ lines and handles multiple commands:\n- init\n- generate\n- watch\n\nSplit into:\n- src/cli/index.ts (main entry, arg parsing)\n- src/cli/init.ts\n- src/cli/generate.ts\n- src/cli/watch.ts\n- src/cli/utils.ts (shared helpers)","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-25T03:53:35.11834-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T17:26:51.474217-06:00","closed_at":"2026-02-01T17:26:51.474217-06:00","close_reason":"Completed in this commit","external_ref":"gh-37"}
{"id":"rpc.do-598","title":"Modularize ws-advanced.ts","description":"Split ws-advanced.ts (800+ lines) into sub-modules: connection.ts, heartbeat.ts, reconnection.ts, auth.ts. Keep public API unchanged.","status":"closed","priority":3,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-25T01:30:10.548756-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-25T01:36:34.359499-06:00","closed_at":"2026-01-25T01:36:34.359499-06:00","close_reason":"Closed","labels":["architecture","refactor"]}
{"id":"rpc.do-5ah","title":"Add dependency injection for capnweb module","description":"Multiple files dynamically import @dotdo/capnweb at runtime making testing harder and creating duplicate initialization code. Pattern appears in: transports.ts (http, capnweb functions), do-client.ts (connectDO), reconnecting-ws.ts (createRpcSession). Consider: 1) Centralized capnweb loader, 2) Dependency injection pattern, 3) Module preloading option.","status":"open","priority":3,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T05:22:47.119999-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T05:22:47.119999-06:00"}
{"id":"rpc.do-5fs","title":"Create Next.js starter template","description":"Create a starter template repository for Next.js with rpc.do integration. Include: app router setup, typed RPC client, example API routes.","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-25T01:30:06.768897-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-25T01:34:02.05971-06:00","closed_at":"2026-01-25T01:34:02.05971-06:00","close_reason":"Closed","labels":["docs","template"]}
{"id":"rpc.do-5l8","title":"Add createRPCClient factory function","description":"Add createRPCClient(options) factory function that creates an RPC client with baseUrl, headers, fetch, timeout, and retry options. This is what SDK codegen expects to import. Should wrap the existing RPC() + http() pattern into a simpler factory.","status":"closed","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-24T17:56:01.670877-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-24T18:23:20.885292-06:00","closed_at":"2026-01-24T18:23:20.885292-06:00","close_reason":"Added createRPCClient factory function"}
{"id":"rpc.do-65w","title":"Add OpenAPI schema export for interoperability","description":"For interop with REST tooling, add schema export:\n\nnpx rpc.do export-openapi --source ./MyDO.ts --output ./openapi.json\n\nShould generate:\n- OpenAPI 3.x spec from TypeScript types\n- Path per RPC method\n- Request/response schemas\n- Tags for namespaces\n\nUse case: Teams that need REST clients alongside typed RPC","status":"open","priority":3,"issue_type":"feature","owner":"4130910+nathanclevenger@users.noreply.github.com","estimated_minutes":360,"created_at":"2026-02-02T05:23:53.988772-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T05:23:53.988772-06:00","labels":["feature","interop"]}
{"id":"rpc.do-68w","title":"Fix JSONC comment stripping regex that corrupts URLs","description":"src/detect.ts:359 - The regex for stripping single-line comments uses a negative lookbehind that fails for strings containing // (e.g. https://example.com gets mangled). Use a proper state-machine parser or character-by-character tracking.","status":"closed","priority":0,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:53:03.294118-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T06:57:10.514448-06:00","closed_at":"2026-02-02T06:57:10.514448-06:00","close_reason":"Closed"}
{"id":"rpc.do-6jg","title":"Add CLI watch mode","description":"Add 'npx rpc.do watch' command that watches for schema changes and auto-regenerates types. Use chokidar or similar.","status":"closed","priority":2,"issue_type":"feature","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-25T01:30:09.456055-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-25T01:32:58.497539-06:00","closed_at":"2026-01-25T01:32:58.497539-06:00","close_reason":"Closed","labels":["cli","feature"]}
{"id":"rpc.do-6x0","title":"TS: Improve type guards with better narrowing","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T05:22:57.750276-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T08:44:29.54433-06:00","closed_at":"2026-02-02T08:44:29.54433-06:00","close_reason":"Closed"}
{"id":"rpc.do-71f","title":"Remove or fix ws() references in README and docs","description":"README shows 'import { ws } from rpc.do' but ws() does not exist - it was renamed to capnweb(). Either add a ws() alias/export or update all docs. Check README.md and all docs/ files for ws() references.","status":"closed","priority":1,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:56:01.123495-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T07:16:23.33084-06:00","closed_at":"2026-02-02T07:16:23.33084-06:00","close_reason":"Closed"}
{"id":"rpc.do-7j3","title":"TS: Reduce type assertions (as any) in test files","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T05:23:13.756897-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T07:55:06.398093-06:00","closed_at":"2026-02-02T07:55:06.398093-06:00","close_reason":"Closed"}
{"id":"rpc.do-7nr","title":"Fix TypeScript errors in production code (react.ts, testing.ts)","description":"3 sets of production TS errors: (1) testing.ts:75 - createMockProxy\u003cT\u003e missing 'T extends object' constraint. (2) react.ts:217,235,262,283 - PathValue\u003cT,P\u003e can't prove function constraint for createQueryFn/createMutationFn. (3) testing.ts:159 - MockResponse union has 'unknown' member that subsumes all others. Also widen createSpy\u003cT\u003e constraint.","status":"closed","priority":2,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:53:28.469406-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T06:55:46.514818-06:00","closed_at":"2026-02-02T06:55:46.514818-06:00","close_reason":"Closed"}
{"id":"rpc.do-7op","title":"Add rpc.do doctor CLI command for troubleshooting","description":"New CLI command to diagnose common setup issues:\n\nnpx rpc.do doctor\n\nChecks:\n- wrangler.toml exists and is valid\n- Durable Objects configured correctly\n- TypeScript setup correct\n- Dependencies installed\n- Peer dependencies satisfied\n- Network connectivity to rpc.do service (if using)\n- Node.js version compatible\n\nOutput:\n- Green checkmarks for passing\n- Red X with fix instructions for failing\n- Links to troubleshooting docs","status":"open","priority":3,"issue_type":"feature","owner":"4130910+nathanclevenger@users.noreply.github.com","estimated_minutes":180,"created_at":"2026-02-02T05:24:04.879486-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T05:24:04.879486-06:00","labels":["cli","dx"]}
{"id":"rpc.do-7ow","title":"TS: Consolidate duplicate type definitions","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T05:23:22.085203-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T06:32:55.723853-06:00","closed_at":"2026-02-02T06:32:55.723853-06:00","close_reason":"Closed"}
{"id":"rpc.do-7yu","title":"Add RateLimitError class","description":"Add RateLimitError class to src/errors.ts for 429 responses. Should include retryAfter field (from Retry-After header). Export from rpc.do/errors. Used by SDK codegen for typed error handling.","status":"closed","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-24T17:55:59.906847-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-25T03:23:21.259695-06:00","closed_at":"2026-01-25T03:23:21.259695-06:00","close_reason":"Work completed in previous session","external_ref":"gh-23"}
{"id":"rpc.do-82f","title":"Add timeout to ensureConnected polling","description":"src/transports/reconnecting-ws.ts:279 - ensureConnected recursively polls with setTimeout(50ms) with no timeout. If stuck in 'connecting' state, callers wait indefinitely. Add configurable connection timeout (default 30s).","status":"closed","priority":2,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:53:32.41534-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T07:09:39.853234-06:00","closed_at":"2026-02-02T07:09:39.853234-06:00","close_reason":"Closed"}
{"id":"rpc.do-8t4","title":"Fix shared module-level counter ID collision in do-collections","description":"core/src/do-collections.ts:158 - Module-level counter shared across all DO instances in the same isolate. Combined with only 4-char random suffix (~1.6M possibilities), IDs can collide under high throughput. Use crypto.randomUUID() or include DO instance ID in the prefix.","status":"closed","priority":0,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:53:07.959836-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T06:55:17.283384-06:00","closed_at":"2026-02-02T06:55:17.283384-06:00","close_reason":"Closed"}
{"id":"rpc.do-8up","title":"Replace any with unknown in public APIs","description":"TypeScript review found excessive use of \\`any\\`:\n\n1. src/index.ts:29 - RPCFunction uses any defaults\n2. src/expose.ts:59-62 - MethodImpl uses any[]\n3. src/worker.ts:24 - dispatch uses any[]\n4. core/src/index.ts:78 - auth uses any\n5. core/src/index.ts:53 - env uses any\n\nReplace with \\`unknown\\` or proper type constraints for better type safety.","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-25T03:53:34.350546-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T17:20:58.440508-06:00","closed_at":"2026-02-01T17:20:58.440508-06:00","close_reason":"Fixed in commit dc8426c","external_ref":"gh-38"}
{"id":"rpc.do-8xb","title":"Add tests for src/react.ts (zero coverage)","description":"src/react.ts (426 lines) has zero dedicated test coverage. Contains runtime functions getMethod(), createQueryFn(), createMutationFn() exported as rpc.do/react package entry point. Create src/react.test.ts testing: valid/invalid paths, mocked RPC proxy, onMutate callback, transformError option, error cases.","status":"closed","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:57:26.858056-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T07:09:26.243497-06:00","closed_at":"2026-02-02T07:09:26.243497-06:00","close_reason":"Closed"}
{"id":"rpc.do-8zc","title":"Create documentation website with search and versioning","description":"Currently all documentation is in markdown files in the repo. For v1.0, need a proper documentation site with:\n- Search functionality\n- Version selector\n- Navigation sidebar\n- Code syntax highlighting\n- Mobile responsive design\n- Auto-generated API reference from TypeDoc\n\nOptions: Docusaurus, VitePress, Nextra, or custom","status":"open","priority":1,"issue_type":"feature","owner":"4130910+nathanclevenger@users.noreply.github.com","estimated_minutes":480,"created_at":"2026-02-02T05:23:34.906671-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T05:23:34.906671-06:00","labels":["docs","v1.0-blocker"]}
{"id":"rpc.do-933","title":"Change stability field from production-ready to beta","description":"package.json says stability: production-ready at v0.2.4 which is premature. Multiple issues remain (naming inconsistency, 5 failing tests, missing docs, installation friction). Set to 'beta' until v1.0 criteria are met.","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:56:10.353392-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T07:45:31.664447-06:00","closed_at":"2026-02-02T07:45:31.664447-06:00","close_reason":"Closed"}
{"id":"rpc.do-98j","title":"Add AuthenticationError class","description":"Add AuthenticationError class to src/errors.ts for 401 responses. Should extend Error with message, include HTTP status code. Export from rpc.do/errors. Used by SDK codegen for typed error handling.","status":"closed","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-24T17:55:58.994501-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-24T18:22:25.852503-06:00","closed_at":"2026-01-24T18:22:25.852503-06:00","close_reason":"Added AuthenticationError class"}
{"id":"rpc.do-9pa","title":"GREEN: Add capnweb transport tests","description":"Add tests for capnweb() transport in src/transports.ts (lines 166-204, 0% coverage). Test: lazy-load capnweb module, WebSocket session by default, HTTP batch session when websocket:false, session disposal on close(), method navigation through proxy","status":"closed","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-24T17:29:28.88025-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-24T17:43:18.04311-06:00","closed_at":"2026-01-24T17:43:18.04311-06:00","close_reason":"Tests implemented and passing","labels":["critical","green","tdd","testing"]}
{"id":"rpc.do-9w0","title":"Add concurrent/stress tests","description":"Add stress tests for concurrent RPC calls (100+ parallel). Test: connection pooling, memory cleanup, no request loss under load.","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-25T01:30:07.915292-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-25T01:34:25.124538-06:00","closed_at":"2026-01-25T01:34:25.124538-06:00","close_reason":"Closed","labels":["testing"]}
{"id":"rpc.do-9yl","title":"Add request batching for efficiency","description":"Currently users must use Promise.all for batching. Add:\n\n1. Client-side request batching (debounce and combine requests)\n2. Server-side batch handling (already in capnweb)\n3. Configuration options (batch size, debounce time)\n4. Automatic batching vs manual batching\n\nExample API:\nconst rpc = RPC(http(url, { batching: { maxSize: 10, debounceMs: 50 } }))\n\n// These get batched automatically\nrpc.users.get('1')\nrpc.users.get('2')\nrpc.users.get('3')","status":"open","priority":3,"issue_type":"feature","owner":"4130910+nathanclevenger@users.noreply.github.com","estimated_minutes":240,"created_at":"2026-02-02T05:23:51.639736-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T05:23:51.639736-06:00","labels":["feature","performance"]}
{"id":"rpc.do-ac7","title":"Add @dotdo/rpc to devDependencies for type resolution","description":"src/do-client.ts:61 imports types from @dotdo/rpc which is not in dependencies. Breaks tsc --noEmit and may break .d.ts generation for consumers. Either add to devDependencies/peerDependencies or restructure type imports.","status":"closed","priority":1,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:53:09.609708-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T07:45:31.595729-06:00","closed_at":"2026-02-02T07:45:31.595729-06:00","close_reason":"Closed"}
{"id":"rpc.do-aem","title":"Update SDK codegen to use ConnectionError","description":"SDK codegen currently expects NetworkError but rpc.do has ConnectionError. Either: (a) add NetworkError as alias for ConnectionError, or (b) update SDK codegen to use ConnectionError. Prefer (b) for consistency.","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-24T17:56:02.923435-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T17:26:51.438202-06:00","closed_at":"2026-02-01T17:26:51.438202-06:00","close_reason":"Completed in this commit"}
{"id":"rpc.do-ag3","title":"Add memory leak tests","description":"Add tests verifying cleanup on errors, timeouts, and connection close. Verify pendingRequests Map cleanup, timeout clearing, event listener removal.","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-25T01:30:08.025138-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-25T01:39:05.26272-06:00","closed_at":"2026-01-25T01:39:05.26272-06:00","close_reason":"Closed","labels":["testing"]}
{"id":"rpc.do-age","title":"Fix race condition in transport factory","description":"Location: src/index.ts:103-115\n\nThe getTransport() function has a race condition:\n```typescript\nif (_transportPromise) return _transportPromise\n// ... later\n_transportPromise = Promise.resolve(transport())\n_transport = await _transportPromise\n_transportPromise = null  // Clears while others might be awaiting\n```\n\nThis could cause multiple factory invocations if getTransport() is called concurrently before the first promise resolves.\n\nFix: Use proper singleton pattern with locking, don't clear the promise until after all waiters resolve.","status":"closed","priority":1,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-25T03:53:27.939147-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T17:20:58.433688-06:00","closed_at":"2026-02-01T17:20:58.433688-06:00","close_reason":"Fixed in commit dc8426c","external_ref":"gh-39"}
{"id":"rpc.do-apc","title":"Split DurableRPC class into smaller composable mixins","description":"core/src/index.ts DurableRPC class is 1100+ lines handling: RPC protocol, WebSocket hibernation, SQL methods, storage methods, collection methods, schema introspection, colo awareness, and broadcasting. Consider: 1) Mixin pattern for features (SqlMixin, CollectionMixin, etc.), 2) Composition over inheritance, 3) Feature flags to exclude unused capabilities.","status":"open","priority":3,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T05:22:52.013604-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T05:22:52.013604-06:00"}
{"id":"rpc.do-aqi","title":"Write tRPC migration guide","description":"Create migration guide from tRPC to rpc.do. Cover: conceptual differences, code transformations, transport options, type system comparison.","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-25T01:30:06.877871-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-25T01:32:27.323805-06:00","closed_at":"2026-01-25T01:32:27.323805-06:00","close_reason":"Closed","labels":["docs"]}
{"id":"rpc.do-asp","title":"Add direct unit tests for src/extract.ts","description":"src/extract.ts (1057 lines) is only tested indirectly through slow CLI process spawning in cli-source tests. The exported functions extractTypes(), generateDTS(), generateIndex() deserve direct unit tests. Would be faster and more targeted than current e2e approach.","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:57:27.242593-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T07:42:24.726623-06:00","closed_at":"2026-02-02T07:42:24.726623-06:00","close_reason":"Closed"}
{"id":"rpc.do-ayp","title":"Document getTransportSync() initialization requirement","description":"src/do-client.ts:616-626 - DOClient needs sync transport access for sql/storage/collection. If transport is a factory, throws 'Transport not initialized. Call any async method first.' This is a subtle footgun. Either document prominently or auto-initialize.","status":"closed","priority":3,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:54:02.715309-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T07:43:26.654081-06:00","closed_at":"2026-02-02T07:43:26.654081-06:00","close_reason":"Closed"}
{"id":"rpc.do-bg7","title":"Add missing tsconfig flags","description":"tsconfig.json missing: isolatedModules (important for tsup/esbuild), noUnusedLocals, noUnusedParameters, noFallthroughCasesInSwitch. These catch dead code and prevent subtle bugs.","status":"closed","priority":3,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:53:54.699881-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T06:56:39.69678-06:00","closed_at":"2026-02-02T06:56:39.69678-06:00","close_reason":"Closed"}
{"id":"rpc.do-bpx","title":"Add discriminated union for ServerMessage","description":"In transports.ts, change ServerMessage from loose type to discriminated union: { id?: number; result: unknown; error?: never } | { id?: number; result?: never; error: unknown }","status":"closed","priority":3,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-25T01:30:09.241456-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-25T01:33:44.655317-06:00","closed_at":"2026-01-25T01:33:44.655317-06:00","close_reason":"Closed","labels":["refactor","typescript"]}
{"id":"rpc.do-buh","title":"GREEN: Implement --source type extraction in CLI","description":"Implement npx rpc.do generate --source ./MyDO.ts using ts-morph for full TypeScript type extraction.\n\nImplementation:\n1. Add ts-morph dependency\n2. Add --source flag to CLI (alternative to --url)\n3. Parse DO source file with ts-morph Project\n4. Find class extending DigitalObject/DurableRPC\n5. Extract methods with full type signatures\n6. Extract namespaces (object properties with function values)\n7. Handle generic types like Collection\u003cUser\u003e\n8. Generate .do/*.d.ts with proper exports\n9. Handle imported types - inline or re-export\n10. Add watch mode with chokidar for file changes\n\nThis enables fully typed RPC clients without deployment.","status":"closed","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-25T08:43:38.909203-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T17:40:06.64354-06:00","closed_at":"2026-02-01T17:40:06.64354-06:00","close_reason":"Complete and working - verified with test","external_ref":"gh-53","dependencies":[{"issue_id":"rpc.do-buh","depends_on_id":"rpc.do-238","type":"blocks","created_at":"2026-01-25T08:43:44.138877-06:00","created_by":"Nathan Clevenger"}]}
{"id":"rpc.do-c43","title":"Create example: Dashboard with multiple transports","description":"Create example showing composite transport usage - HTTP with WebSocket fallback. Include: real-time updates, auth integration.","status":"closed","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-25T01:30:05.560652-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-25T01:36:10.561965-06:00","closed_at":"2026-01-25T01:36:10.561965-06:00","close_reason":"Closed","labels":["docs","example","high-priority"]}
{"id":"rpc.do-c6a","title":"Reduce type duplication between rpc.do and @dotdo/types","description":"Several types are defined in rpc.do/do-client.ts that mirror @dotdo/types/rpc: SqlQueryResult, RemoteStorage, RemoteCollection, Filter, QueryOptions. Comments indicate slight shape differences. Should either: 1) Align shapes and re-export from @dotdo/types, 2) Create explicit adapter types, or 3) Document the differences clearly in a types compatibility guide.","status":"open","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T05:22:48.173999-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T05:22:48.173999-06:00"}
{"id":"rpc.do-c9f","title":"GREEN: Add CLI module tests","description":"Add comprehensive tests for src/cli.ts (261 lines, 0% coverage). Test: main() command parsing, loadConfig() for do.config.ts, fetchSchema() HTTP fetch + validation, generateClient() TypeScript generation, error handling for missing config/invalid schema/network failures","status":"closed","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-24T17:29:27.799308-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-25T03:23:21.253374-06:00","closed_at":"2026-01-25T03:23:21.253374-06:00","close_reason":"Work completed in previous session","external_ref":"gh-17","labels":["critical","green","tdd","testing"]}
{"id":"rpc.do-cav","title":"Improve two-package positioning clarity","description":"The relationship between rpc.do and @dotdo/rpc is documented but confusing to newcomers.\n\nImprovements:\n1. Add clear decision tree in main README\n2. Clarify 'managed' means (oauth.do, cli.do integration)\n3. Add visual diagram showing package relationship\n4. Consider: should @dotdo/rpc be the only package? (server-only)\n5. Document when to install each\n\nCurrent confusion:\n- Both have similar DurableRPC concepts\n- Overlap in exports\n- 'managed implementation' is vague","status":"closed","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","estimated_minutes":120,"created_at":"2026-02-02T05:24:02.020193-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T07:40:11.419994-06:00","closed_at":"2026-02-02T07:40:11.419994-06:00","close_reason":"Closed","labels":["docs","positioning","v1.0-blocker"]}
{"id":"rpc.do-cet","title":"Fix CLI init template with stale API references","description":"src/cli/init.ts:215-267 - generateIndexTs() references non-existent createHTTPTransport, createCapnwebTransport (should be http(), capnweb()). DurableRPC imported from 'rpc.do' but lives in '@dotdo/rpc'. Constructor calls super(state, env) but should be (ctx, env).","status":"closed","priority":3,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:53:53.275495-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T07:16:23.366489-06:00","closed_at":"2026-02-02T07:16:23.366489-06:00","close_reason":"Closed"}
{"id":"rpc.do-cjm","title":"TS: Sync tsconfig settings between root and e2e","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T05:23:05.486532-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T05:36:09.390447-06:00","closed_at":"2026-02-02T05:36:09.390447-06:00","close_reason":"Synced e2e/tsconfig.json with root stricter settings (noUncheckedIndexedAccess, exactOptionalPropertyTypes, etc)"}
{"id":"rpc.do-cln","title":"RED: Collection RPC handlers tests","description":"Write failing tests for collection RPC method handlers. Methods needed: do.things.{list,get,create,update,delete,find,count}, do.nouns.{list,get,define}, do.verbs.{list,get,define}, do.actions.{list,get,create,start,complete,fail}, do.relationships.{list,create,delete,traverse}, do.functions.{list,get,create,execute}, do.introspect. Test that DigitalObject registers these methods and they dispatch to collections.","status":"closed","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-25T08:37:47.022239-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T17:26:51.500335-06:00","closed_at":"2026-02-01T17:26:51.500335-06:00","close_reason":"Completed in this commit","external_ref":"gh-54"}
{"id":"rpc.do-cwi","title":"Move isBuiltInType Set to module scope","description":"src/extract.ts:837-867 - isBuiltInType() creates a new Set with 23 entries on every invocation, called in tight loops during type extraction. Move builtIns Set to module scope.","status":"closed","priority":3,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:53:41.570241-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T06:56:39.653076-06:00","closed_at":"2026-02-02T06:56:39.653076-06:00","close_reason":"Closed"}
{"id":"rpc.do-d10","title":"POC: Bypass 6-fetch limit via WS proxy","description":"Experiment with bypassing 6 simultaneous outbound fetch limit using WS:\n\nHypothesis: WS connections don't count against the 6-fetch limit.\nIf true, we can proxy unlimited outbound requests through a WS to another worker.\n\nTest plan:\n1. Confirm 6-fetch limit exists and fails on 7th\n2. Open WS to proxy worker\n3. Send fetch requests through WS\n4. Verify \u003e6 concurrent requests succeed\n5. Measure latency overhead of WS proxying vs direct fetch\n\nArchitecture:\nWorker A --[WS]--\u003e Worker B (proxy) --[fetch]--\u003e External APIs\n\nIf this works, it's a major cost/capability unlock.","status":"closed","priority":1,"issue_type":"feature","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-25T04:16:13.978521-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T17:40:06.790791-06:00","closed_at":"2026-02-01T17:40:06.790791-06:00","close_reason":"POC complete in experiments/ws-fetch-bypass/","external_ref":"gh-50"}
{"id":"rpc.do-dcq","title":"Fix regex injection in detect.ts className","description":"src/detect.ts:481 - className interpolated directly into RegExp pattern. If className from wrangler.toml contains regex special chars, could cause ReDoS or unexpected matching. Escape className before use.","status":"closed","priority":2,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:53:46.025527-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T06:56:42.250997-06:00","closed_at":"2026-02-02T06:56:42.250997-06:00","close_reason":"Closed"}
{"id":"rpc.do-dk2","title":"Add tests for binding and composite transports","description":"Missing test coverage:\n\n1. binding() transport - no tests at all\n   - Should test method navigation\n   - Should test namespace access\n   - Should test error cases (non-existent method, non-function property)\n\n2. composite() transport - no tests at all\n   - Should test fallback behavior\n   - Should test first-success-wins\n   - Should test all-fail scenario\n   - Should test close() on all transports\n\nCreate tests/binding.test.ts and tests/composite.test.ts","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-25T03:53:33.000563-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T17:26:51.37632-06:00","closed_at":"2026-02-01T17:26:51.37632-06:00","close_reason":"Completed in this commit","external_ref":"gh-40"}
{"id":"rpc.do-dru","title":"Fix timing middleware race condition on concurrent calls","description":"Both client (src/middleware/timing.ts:139) and server (core/src/middleware.ts:298) timing middleware correlate by method name. Concurrent calls to the same method get misattributed timings. Use unique per-request IDs instead of method name prefix matching.","status":"closed","priority":1,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:53:12.259222-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T07:09:11.833435-06:00","closed_at":"2026-02-02T07:09:11.833435-06:00","close_reason":"Closed"}
{"id":"rpc.do-dyd","title":"Fix http() transport silently ignoring auth option","description":"src/transports.ts:162-170 - http() accepts auth option but silently ignores it. Users passing auth reasonably expect it to work. Either implement auth header support, remove the option, or add a console.warn.","status":"closed","priority":2,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:53:33.022021-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T07:12:07.530203-06:00","closed_at":"2026-02-02T07:12:07.530203-06:00","close_reason":"Closed"}
{"id":"rpc.do-eb3","title":"CRITICAL: Unify transports to use capnweb protocol","description":"Current state has incompatible protocols:\n- Client `ws()`, `wsAdvanced()` use custom JSON-RPC: `{ id, method: 'do', path, args }`\n- Server `DurableRPC` uses capnweb's `RpcSession`\n- These are INCOMPATIBLE\n\nSolution:\n1. Remove `ws()` basic transport - use capnweb's `newWebSocketRpcSession()` directly\n2. Create `ReconnectingWebSocketTransport` implementing capnweb's `RpcTransport` interface\n   - Reconnection with exponential backoff\n   - Heartbeat ping/pong\n   - First-message authentication\n   - Message queuing during disconnection\n3. Remove `wsAdvanced()` custom protocol implementation\n4. Keep `capnweb()` as simple wrapper\n5. Everything uses capnweb's `RpcSession` for protocol\n\nArchitecture after fix:\n- Client: ReconnectingWebSocketTransport → RpcSession\n- Server: HibernatableWebSocketTransport → RpcSession\n- One protocol everywhere","status":"closed","priority":0,"issue_type":"feature","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-25T03:52:58.210153-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-25T04:34:33.491705-06:00","closed_at":"2026-01-25T04:34:33.491705-06:00","close_reason":"Completed: Removed ws/wsAdvanced transports, unified everything to capnweb protocol. HTTP uses newHttpBatchRpcSession, WebSocket uses ReconnectingWebSocketTransport."}
{"id":"rpc.do-edq","title":"CRITICAL: Refactor DurableRPC to use capnweb RpcTarget with HibernatableWebSocketTransport","description":"Current DurableRPC implements its own JSON-RPC protocol instead of using capnweb. This is wrong.\n\n## Problem\n- DurableRPC claims 'capnweb-compatible' but doesn't use capnweb at all\n- Missing capnweb features: promise pipelining, bidirectional RPC, object capabilities\n- Duplicating work that capnweb already does\n\n## Solution\n1. DurableRPC should extend capnweb's RpcTarget (methods exposed via RPC)\n2. Create HibernatableWebSocketTransport implementing RpcTransport:\n   - send(message): Use ws.send()\n   - receive(): Promise that resolves on webSocketMessage\n   - abort(): Close connection\n3. Use ctx.acceptWebSocket() for hibernation\n4. webSocketMessage/webSocketClose/webSocketError handlers feed the transport\n5. Use capnweb's RpcSession for actual RPC handling\n\n## RpcTransport interface\n```typescript\ninterface RpcTransport {\n  send(message: string): Promise\u003cvoid\u003e;\n  receive(): Promise\u003cstring\u003e;\n  abort?(reason: any): void;\n}\n```\n\n## Benefits\n- Full capnweb protocol support\n- Promise pipelining (call methods on unresolved promises)\n- Bidirectional RPC\n- Object capability security\n- Hibernation for cost savings","status":"closed","priority":0,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-25T03:18:15.822908-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-25T03:21:30.117717-06:00","closed_at":"2026-01-25T03:21:30.117717-06:00","close_reason":"Closed","labels":["architecture","capnweb","critical"]}
{"id":"rpc.do-eff","title":"Add security blocklist for property access","description":"Location: src/transports.ts:147-166\n\nPath traversal in binding transport could access dangerous properties:\n- __proto__\n- constructor\n- prototype\n\nAdd a blocklist to prevent accessing these properties via RPC.\n\n```typescript\nconst BLOCKED_PROPS = new Set(['__proto__', 'constructor', 'prototype'])\nif (BLOCKED_PROPS.has(parts[i])) {\n  throw new RPCError('Access denied', 'FORBIDDEN')\n}\n```","status":"closed","priority":1,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-25T03:53:29.172583-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T17:20:58.428107-06:00","closed_at":"2026-02-01T17:20:58.428107-06:00","close_reason":"Fixed in commit dc8426c","external_ref":"gh-42"}
{"id":"rpc.do-ek8","title":"Create example: Todo CRUD app","description":"Create a working example application demonstrating HTTP transport with Service Bindings. Include: CRUD operations, typed client, simple UI.","status":"closed","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-25T01:30:05.453614-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-25T01:34:06.155291-06:00","closed_at":"2026-01-25T01:34:06.155291-06:00","close_reason":"Closed","labels":["docs","example","high-priority"]}
{"id":"rpc.do-ekb","title":"POC: ctx.waitUntil with external WS","description":"Experiment with ctx.waitUntil keeping WS alive outside handler:\n\nQuestions:\n1. If WS is held in module scope, can ctx.waitUntil keep processing messages?\n2. Can we receive WS messages after fetch handler returns?\n3. How long can we keep a WS alive with ctx.waitUntil?\n4. What happens when waitUntil promise settles but WS is still open?\n\nTest scenarios:\n- Open WS in module scope\n- In fetch handler: ctx.waitUntil(wsProcessingPromise)\n- Return response immediately\n- See if WS continues processing","status":"closed","priority":1,"issue_type":"feature","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-25T04:16:12.696365-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T17:40:06.935497-06:00","closed_at":"2026-02-01T17:40:06.935497-06:00","close_reason":"POC complete in experiments/waituntil-ws/","external_ref":"gh-51"}
{"id":"rpc.do-esk","title":"Add cookbook/recipes section to documentation","description":"Missing common patterns documentation. Add recipes for:\n\n1. Pagination with cursor\n2. File uploads via RPC\n3. Authentication patterns (JWT, API keys, oauth.do)\n4. Rate limiting implementation\n5. Caching strategies\n6. Error retry patterns\n7. Optimistic updates with React Query\n8. Real-time subscriptions pattern\n9. Multi-tenant DO design\n10. Testing RPC clients and servers\n\nLocation: docs/recipes/ or docs/COOKBOOK.md","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","estimated_minutes":300,"created_at":"2026-02-02T05:23:57.666907-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T07:43:26.61995-06:00","closed_at":"2026-02-02T07:43:26.61995-06:00","close_reason":"Closed","labels":["docs","dx"]}
{"id":"rpc.do-fre","title":"Write Getting Started guide","description":"Write a beginner-friendly quick start guide: 5-minute setup, first RPC call, step-by-step first project, common patterns. Add to README or separate GETTING_STARTED.md","status":"closed","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-25T01:30:06.662081-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-25T03:23:21.250227-06:00","closed_at":"2026-01-25T03:23:21.250227-06:00","close_reason":"Work completed in previous session","external_ref":"gh-32","labels":["docs","high-priority"]}
{"id":"rpc.do-fvi","title":"Add rpc.do introspect CLI to generate types from running server","description":"The server already exposes schema() endpoint for runtime API discovery. Add 'rpc.do introspect https://my-server.com' that fetches the schema and generates TypeScript types. This connects the existing schema endpoint with the CLI codegen.","status":"open","priority":2,"issue_type":"feature","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:56:08.966776-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T06:56:08.966776-06:00"}
{"id":"rpc.do-ith","title":"TS: Standardize Rpc vs RPC naming convention","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T05:23:36.446245-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T08:13:23.271995-06:00","closed_at":"2026-02-02T08:13:23.271995-06:00","close_reason":"Closed"}
{"id":"rpc.do-ja5","title":"Add rich schema discovery with TypeScript types","description":"Current schema (GET /__schema) is too basic:\n```typescript\ninterface RpcMethodSchema {\n  name: string\n  path: string\n  params: number  // Just count, no types!\n}\n```\n\nNeed richer schema for proper codegen:\n\nOption 1: TypeScript AST (simplified)\n```typescript\ninterface RpcMethodSchema {\n  name: string\n  path: string\n  params: Array\u003c{ name: string; type: TypeNode }\u003e\n  returnType: TypeNode\n  description?: string\n}\n\ntype TypeNode =\n  | { kind: 'primitive'; type: 'string' | 'number' | 'boolean' | 'null' }\n  | { kind: 'object'; properties: Record\u003cstring, TypeNode\u003e }\n  | { kind: 'array'; element: TypeNode }\n  | { kind: 'union'; types: TypeNode[] }\n  | { kind: 'ref'; name: string }\n```\n\nOption 2: JSON Schema\nUse standard JSON Schema for parameter/return types\n\nOption 3: TypeScript source\nReturn actual .d.ts content for the API\n\nThis enables:\n- Proper CLI codegen with real types (not any)\n- Client-side type validation\n- API documentation generation","status":"closed","priority":1,"issue_type":"feature","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-25T03:57:09.6429-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T17:40:06.488415-06:00","closed_at":"2026-02-01T17:40:06.488415-06:00","close_reason":"Already implemented with two-tiered approach: runtime introspection + static ts-morph extraction","external_ref":"gh-48"}
{"id":"rpc.do-jnx","title":"TS: Add missing generic constraints","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T05:22:50.678502-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T06:32:55.727412-06:00","closed_at":"2026-02-02T06:32:55.727412-06:00","close_reason":"Closed"}
{"id":"rpc.do-kmx","title":"HTTP transport should throw appropriate error types","description":"Location: src/transports.ts:120-125\n\nCurrently 401 and 429 responses throw generic RPCError:\n```typescript\nif (!res.ok) {\n  const error = await res.text()\n  throw new RPCError(error || \\`HTTP \\${res.status}\\`, String(res.status))\n}\n```\n\nShould throw:\n- 401 → AuthenticationError\n- 429 → RateLimitError\n- Other 4xx → RPCError\n- 5xx → RPCError with appropriate code","status":"closed","priority":1,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-25T03:53:31.66311-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T17:20:58.437012-06:00","closed_at":"2026-02-01T17:20:58.437012-06:00","close_reason":"Fixed in commit dc8426c"}
{"id":"rpc.do-ko9","title":"Unify duplicate constants.ts files between rpc.do and @dotdo/rpc","description":"The constants.ts file is duplicated between src/constants.ts and core/src/constants.ts with identical content. Both define INTERNAL_METHODS for SQL, storage, and collection RPC method names. Should be consolidated: either extract to a shared package (@dotdo/rpc-constants) or have rpc.do re-export from @dotdo/rpc.","status":"closed","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T05:22:43.612934-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T05:31:29.722194-06:00","closed_at":"2026-02-02T05:31:29.722194-06:00","close_reason":"Duplication is intentional by design (PACKAGE_BOUNDARY.md). Improved documentation in both constants.ts files instead."}
{"id":"rpc.do-leo","title":"Extract shared MockWebSocket test utility","description":"Create tests/fixtures/mocks.ts with shared MockWebSocket class. Currently duplicated in ws-basic.test.ts and ws-timeout.test.ts. Include: MockWebSocketPair, event simulation helpers.","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-25T01:30:07.807424-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-25T03:23:21.257345-06:00","closed_at":"2026-01-25T03:23:21.257345-06:00","close_reason":"Work completed in previous session","external_ref":"gh-33","labels":["refactor","testing"]}
{"id":"rpc.do-lmq","title":"Be selective about re-exports from transports.ts","description":"src/index.ts:459 - 'export * from ./transports' bleeds http, capnweb, binding, composite, ReconnectingWebSocketTransport, reconnectingWs, createRpcSession, withMiddleware, withRetry, type guards, and more into main entry. Should be selective about what gets re-exported.","status":"closed","priority":3,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:53:57.024719-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T08:13:23.338265-06:00","closed_at":"2026-02-02T08:13:23.338265-06:00","close_reason":"Closed"}
{"id":"rpc.do-lop","title":"Create example: Real-time chat app","description":"Create a working example application demonstrating WebSocket transport with Durable Objects. Include: chat room DO, message persistence, typed client, deployment guide.","status":"closed","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-25T01:30:05.347979-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-25T03:23:21.251865-06:00","closed_at":"2026-01-25T03:23:21.251865-06:00","close_reason":"Work completed in previous session","external_ref":"gh-34","labels":["docs","example","high-priority"]}
{"id":"rpc.do-lyw","title":"Add CLI init command","description":"Add 'npx rpc.do init' command for project scaffolding. Create config file, add dependencies, set up basic structure.","status":"closed","priority":2,"issue_type":"feature","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-25T01:30:09.348155-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-25T03:23:21.255861-06:00","closed_at":"2026-01-25T03:23:21.255861-06:00","close_reason":"Work completed in previous session","external_ref":"gh-35","labels":["cli","feature"]}
{"id":"rpc.do-mg0","title":"Add integration tests for client-server flows","description":"Testing review found lack of end-to-end integration tests.\n\nNeed tests that verify:\n1. Full HTTP client → server round-trip\n2. Full WebSocket client → server flow\n3. expose() with actual WorkerEntrypoint\n4. createWorker() with real request handling\n5. DurableRPC with actual WebSocket messages\n\nCreate tests/integration/ directory with proper setup.","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-25T03:53:49.881731-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T17:26:51.405899-06:00","closed_at":"2026-02-01T17:26:51.405899-06:00","close_reason":"Completed in this commit"}
{"id":"rpc.do-nom","title":"GREEN: Implement collection RPC handlers","description":"Implement RPC handlers that connect collections to DigitalObject method registry. Create db/collections/rpc-handlers.ts with registerCollectionMethods(registry, storage). Each method delegates to the appropriate collection. Wire up in DigitalObject.registerRPCMethods().","status":"closed","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-25T08:37:48.830925-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T17:37:38.814469-06:00","closed_at":"2026-02-01T17:37:38.814469-06:00","close_reason":"Completed","external_ref":"gh-55","dependencies":[{"issue_id":"rpc.do-nom","depends_on_id":"rpc.do-cln","type":"blocks","created_at":"2026-01-25T08:37:55.626947-06:00","created_by":"Nathan Clevenger"}]}
{"id":"rpc.do-oaw","title":"Guard against session initialization race in transports","description":"http() and capnweb() transports use 'if (\\!session)' check that can race. Multiple concurrent calls before session init can create multiple sessions. Add a session initialization promise that subsequent calls await.","status":"closed","priority":2,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:53:25.445109-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T07:10:18.393889-06:00","closed_at":"2026-02-02T07:10:18.393889-06:00","close_reason":"Closed"}
{"id":"rpc.do-okf","title":"Expand prototype pollution blocklist","description":"src/utils/wrap-target.ts:103-131 - SECURITY_BLOCKLIST blocks __proto__, constructor, prototype but collectObjectProperties uses getOwnPropertyNames which gets non-enumerable props. Add common dangerous names (eval, globalThis, process, require) or consider allowlist approach.","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:53:59.731203-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T06:56:39.745004-06:00","closed_at":"2026-02-02T06:56:39.745004-06:00","close_reason":"Closed"}
{"id":"rpc.do-seq","title":"Harden for Release","description":"Critical fixes and improvements needed before npm publish","status":"closed","priority":2,"issue_type":"epic","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-23T10:24:38.675452-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-24T16:05:42.666398-06:00","closed_at":"2026-01-24T16:05:42.666398-06:00","close_reason":"All hardening tasks completed - WebSocket bugs fixed, error handling standardized, TypeScript improved, CI/CD added, timeouts implemented","external_ref":"gh-1"}
{"id":"rpc.do-seq.1","title":"RED: Fix auth.ts direct re-exports","description":"Lines 230-231 have static exports from oauth.do that break if not installed","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-23T10:25:20.714842-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-23T10:27:39.7968-06:00","closed_at":"2026-01-23T10:27:39.7968-06:00","close_reason":"Closed","labels":["critical","red","tdd"],"dependencies":[{"issue_id":"rpc.do-seq.1","depends_on_id":"rpc.do-seq","type":"parent-child","created_at":"2026-01-23T10:25:20.715606-06:00","created_by":"Nathan Clevenger"}]}
{"id":"rpc.do-seq.10","title":"GREEN: Add CI/CD GitHub Actions","description":"Add .github/workflows/ci.yml for automated testing","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-23T10:25:30.759217-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-24T15:55:16.130922-06:00","closed_at":"2026-01-24T15:55:16.130922-06:00","close_reason":"Closed","external_ref":"gh-3","labels":["ci","green","tdd"],"dependencies":[{"issue_id":"rpc.do-seq.10","depends_on_id":"rpc.do-seq","type":"parent-child","created_at":"2026-01-23T10:25:30.759995-06:00","created_by":"Nathan Clevenger"}]}
{"id":"rpc.do-seq.11","title":"REFACTOR: Add sideEffects false to package.json","description":"Enable better tree-shaking for bundlers","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-23T10:25:30.883518-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-23T10:30:59.81593-06:00","closed_at":"2026-01-23T10:30:59.81593-06:00","close_reason":"Closed","labels":["refactor","tdd"],"dependencies":[{"issue_id":"rpc.do-seq.11","depends_on_id":"rpc.do-seq","type":"parent-child","created_at":"2026-01-23T10:25:30.884108-06:00","created_by":"Nathan Clevenger"}]}
{"id":"rpc.do-seq.12","title":"REFACTOR: Update README with motivation","description":"Add Why rpc.do section, How it works explanation, CHANGELOG.md","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-23T10:25:31.05479-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-23T10:33:09.016256-06:00","closed_at":"2026-01-23T10:33:09.016256-06:00","close_reason":"Closed","labels":["docs","refactor","tdd"],"dependencies":[{"issue_id":"rpc.do-seq.12","depends_on_id":"rpc.do-seq","type":"parent-child","created_at":"2026-01-23T10:25:31.055425-06:00","created_by":"Nathan Clevenger"}]}
{"id":"rpc.do-seq.2","title":"RED: Fix basic WS token in URL security","description":"transports.ts:84 sends token in URL query params. Deprecate or add security warning","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-23T10:25:29.725964-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-23T10:31:02.80753-06:00","closed_at":"2026-01-23T10:31:02.80753-06:00","close_reason":"Closed","labels":["red","security","tdd"],"dependencies":[{"issue_id":"rpc.do-seq.2","depends_on_id":"rpc.do-seq","type":"parent-child","created_at":"2026-01-23T10:25:29.726492-06:00","created_by":"Nathan Clevenger"}]}
{"id":"rpc.do-seq.3","title":"GREEN: Generate ws-advanced.d.ts","description":"TypeScript declaration file not being generated for transports/ws-advanced","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-23T10:25:29.847217-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-23T10:31:12.061441-06:00","closed_at":"2026-01-23T10:31:12.061441-06:00","close_reason":"Closed","labels":["green","tdd"],"dependencies":[{"issue_id":"rpc.do-seq.3","depends_on_id":"rpc.do-seq","type":"parent-child","created_at":"2026-01-23T10:25:29.847785-06:00","created_by":"Nathan Clevenger"}]}
{"id":"rpc.do-seq.4","title":"RED: Fix silent error swallowing","description":"transports.ts:109 silently catches JSON parse errors. Add error handling","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-23T10:25:29.969439-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-24T15:58:54.568189-06:00","closed_at":"2026-01-24T15:58:54.568189-06:00","close_reason":"Closed","external_ref":"gh-8","labels":["red","tdd"],"dependencies":[{"issue_id":"rpc.do-seq.4","depends_on_id":"rpc.do-seq","type":"parent-child","created_at":"2026-01-23T10:25:29.970005-06:00","created_by":"Nathan Clevenger"}]}
{"id":"rpc.do-seq.5","title":"RED: Add id to WebSocket error responses","description":"server.ts:112 error response missing id field for request correlation","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-23T10:25:30.095699-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-24T15:58:54.627288-06:00","closed_at":"2026-01-24T15:58:54.627288-06:00","close_reason":"Closed","external_ref":"gh-9","labels":["red","tdd"],"dependencies":[{"issue_id":"rpc.do-seq.5","depends_on_id":"rpc.do-seq","type":"parent-child","created_at":"2026-01-23T10:25:30.096365-06:00","created_by":"Nathan Clevenger"}]}
{"id":"rpc.do-seq.6","title":"GREEN: Add basic ws() transport tests","description":"Basic WebSocket transport is completely untested","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-23T10:25:30.217057-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-23T10:34:38.21226-06:00","closed_at":"2026-01-23T10:34:38.21226-06:00","close_reason":"Closed","labels":["green","tdd","testing"],"dependencies":[{"issue_id":"rpc.do-seq.6","depends_on_id":"rpc.do-seq","type":"parent-child","created_at":"2026-01-23T10:25:30.217672-06:00","created_by":"Nathan Clevenger"}]}
{"id":"rpc.do-seq.7","title":"GREEN: Add cachedAuth and oauthProvider tests","description":"Auth utilities cachedAuth(), oauthProvider(), staticAuth(), compositeAuth() are untested","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-23T10:25:30.340428-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-23T10:34:12.416218-06:00","closed_at":"2026-01-23T10:34:12.416218-06:00","close_reason":"Closed","labels":["green","tdd","testing"],"dependencies":[{"issue_id":"rpc.do-seq.7","depends_on_id":"rpc.do-seq","type":"parent-child","created_at":"2026-01-23T10:25:30.341063-06:00","created_by":"Nathan Clevenger"}]}
{"id":"rpc.do-seq.8","title":"GREEN: Add worker.ts tests","description":"createWorker() and token validation completely untested","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-23T10:25:30.462754-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-23T10:37:59.757016-06:00","closed_at":"2026-01-23T10:37:59.757016-06:00","close_reason":"Closed","labels":["green","tdd","testing"],"dependencies":[{"issue_id":"rpc.do-seq.8","depends_on_id":"rpc.do-seq","type":"parent-child","created_at":"2026-01-23T10:25:30.463347-06:00","created_by":"Nathan Clevenger"}]}
{"id":"rpc.do-seq.9","title":"REFACTOR: Use RPCError consistently","description":"HTTP and basic WS transports throw plain Error instead of RPCError","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-23T10:25:30.582828-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-24T16:00:08.188375-06:00","closed_at":"2026-01-24T16:00:08.188375-06:00","close_reason":"Closed","external_ref":"gh-13","labels":["refactor","tdd"],"dependencies":[{"issue_id":"rpc.do-seq.9","depends_on_id":"rpc.do-seq","type":"parent-child","created_at":"2026-01-23T10:25:30.583449-06:00","created_by":"Nathan Clevenger"}]}
{"id":"rpc.do-shz","title":"Remove or lazy-init eager $ default export","description":"src/index.ts:523 - 'export const $ = RPC(https://rpc.do)' creates objects at import time. Contradicts sideEffects: false in package.json. Either make lazy via getter, move to separate rpc.do/default entry point, or remove entirely.","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:53:35.765626-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T07:10:18.430474-06:00","closed_at":"2026-02-02T07:10:18.430474-06:00","close_reason":"Closed"}
{"id":"rpc.do-tjm","title":"Add CI check for constants file sync","description":"src/constants.ts and core/src/constants.ts are intentionally identical but can drift. Add CI check that diffs the two files, or generate one from the other at build time.","status":"open","priority":3,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:53:50.868731-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T06:53:50.868731-06:00"}
{"id":"rpc.do-u1r","title":"Disable minification in core tsup config","description":"core/tsup.config.ts:17 - minify: true is unusual for a library. Makes debugging harder for consumers, provides minimal size benefit since bundlers minify again downstream.","status":"closed","priority":4,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:54:04.749251-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T08:12:05.812139-06:00","closed_at":"2026-02-02T08:12:05.812139-06:00","close_reason":"Closed"}
{"id":"rpc.do-u8h","title":"CLI generate should produce typed output, not any","description":"Current CLI generates untyped methods:\n```typescript\nhello(...args: any[]): Promise\u003cany\u003e\n```\n\nThis defeats the purpose of type safety. Should generate:\n```typescript\nhello(name: string): Promise\u003cstring\u003e\n```\n\nNeed to either:\n1. Enhance schema to include parameter/return types\n2. Use TypeScript compiler API to extract types from source","status":"closed","priority":2,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-25T03:53:35.957862-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-25T08:43:52.055259-06:00","closed_at":"2026-01-25T08:43:52.055259-06:00","close_reason":"Superseded by rpc.do-238 and rpc.do-buh (--source type extraction)"}
{"id":"rpc.do-ueh","title":"Plan deprecation timeline for RPC-prefix type aliases","description":"RPCProxy, RPCFunction, RPCResult, RPCInput, RPCOptions, RPCClientMiddleware all have @deprecated tags but no planned removal version. Add removal version (e.g. v2.0) to JSDoc tags.","status":"closed","priority":4,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:54:07.24098-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T08:13:23.305972-06:00","closed_at":"2026-02-02T08:13:23.305972-06:00","close_reason":"Closed"}
{"id":"rpc.do-uey","title":"Refactor src/cli.ts to separate main() from utility functions","description":"tests/cli.test.ts lines 133-328 re-implements parseArgs(), loadConfig(), fetchSchema(), generateClient(), generateEntrypoint() because src/cli.ts calls main() on import. Refactor cli.ts to export functions separately so tests can import real production code.","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:57:27.591222-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T08:15:17.561402-06:00","closed_at":"2026-02-02T08:15:17.561402-06:00","close_reason":"Closed"}
{"id":"rpc.do-usc","title":"Extract shared method path navigation utility","description":"The logic for splitting method strings like 'users.create' and navigating to the target is duplicated 4x: http() transport (transports.ts:200), capnweb() (transports.ts:454), reconnecting capnweb (transports.ts:532), binding() (transports.ts:277). Each has slightly different error handling. Extract to shared navigateMethodPath() utility.","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:53:21.101063-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T07:12:07.494837-06:00","closed_at":"2026-02-02T07:12:07.494837-06:00","close_reason":"Closed"}
{"id":"rpc.do-v5x","title":"Add middleware/interceptor support","description":"Architectural review identified lack of middleware support for cross-cutting concerns.\n\nAdd middleware pattern:\n```typescript\ntype Middleware = (ctx: { method: string; args: unknown[] }, next: () =\u003e Promise\u003cunknown\u003e) =\u003e Promise\u003cunknown\u003e\n\nconst rpc = RPC(transport, {\n  middleware: [loggingMiddleware, cachingMiddleware]\n})\n```\n\nUse cases:\n- Logging\n- Caching\n- Request transformation\n- Error handling\n- Metrics","status":"closed","priority":3,"issue_type":"feature","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-25T03:53:48.625262-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T17:37:38.77485-06:00","closed_at":"2026-02-01T17:37:38.77485-06:00","close_reason":"Completed","external_ref":"gh-46"}
{"id":"rpc.do-vm6","title":"Create transport factory pattern for cleaner initialization","description":"Transport creation in src/index.ts RPC() function has complex branching logic with URL protocol detection, options building, and transport instantiation. Consider: 1) TransportResolver pattern that maps protocols to transport factories, 2) Protocol plugins (http, ws, wss, binding), 3) Cleaner options normalization with Zod schema.","status":"open","priority":3,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T05:22:49.014824-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T05:22:49.014824-06:00"}
{"id":"rpc.do-vr7","title":"Rename retryMiddleware or implement actual retry","description":"src/middleware/retry.ts:166 - retryMiddleware() only provides observability hooks, never actually retries. Users adding it to middleware array expect automatic retries. Either rename to retryObserver(), merge into withRetry(), or implement actual retry by re-invoking transport from error handler.","status":"closed","priority":1,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:53:13.022964-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T07:09:17.147928-06:00","closed_at":"2026-02-02T07:09:17.147928-06:00","close_reason":"Closed"}
{"id":"rpc.do-wt2","title":"Add runtime validation / Zod integration","description":"No runtime input validation exists. tRPC has Zod baked in. For v1.0, add optional Zod integration for validating RPC inputs on the server side. SECURITY.md mentions Zod but there is zero actual integration.","status":"open","priority":2,"issue_type":"feature","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:56:07.849499-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T06:56:07.849499-06:00"}
{"id":"rpc.do-xgm","title":"Fix missing .d.ts output for entry points","description":"Only dist/extract.d.ts exists. All other entry points (index, transports, auth, errors, server, expose, react, testing, middleware) are missing .d.ts files. Consumers cannot get type information. Check tsup dts config.","status":"closed","priority":1,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:53:23.307108-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T07:45:31.630664-06:00","closed_at":"2026-02-02T07:45:31.630664-06:00","close_reason":"Closed"}
{"id":"rpc.do-y6f","title":"Replace remaining avoidable any and bare Function types","description":"Avoidable 'as any': transports.ts:506, reconnecting-ws.ts:722, extract.ts:758 - should use 'as Record\u003cstring, unknown\u003e'. Bare Function type (7 occurrences): wrap-target.ts (5x), expose.ts (2x) - should use '(...args: unknown[]) =\u003e unknown'.","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:53:37.887463-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T06:59:18.464479-06:00","closed_at":"2026-02-02T06:59:18.464479-06:00","close_reason":"Closed"}
{"id":"rpc.do-ygq","title":"Add browser bundle tests for react and middleware entry points","description":"src/browser.test.ts tests main, transports, and auth entry points for browser compatibility but skips rpc.do/react and rpc.do/middleware. Add esbuild bundle tests for these entry points. Also consider adding bundle size regression assertions.","status":"closed","priority":3,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:57:28.285379-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T08:12:36.659705-06:00","closed_at":"2026-02-02T08:12:36.659705-06:00","close_reason":"Closed"}
{"id":"rpc.do-ys2","title":"Consolidate duplicate type definitions","description":"Multiple types are defined in multiple places:\n\n1. ServerMessage:\n   - src/transports.ts:23-25\n   - src/transports/ws-advanced/types.ts:36-38\n\n2. AuthProvider:\n   - src/auth.ts:12\n   - src/transports.ts:45\n\n3. Schema types (RpcSchema, RpcMethodSchema, RpcNamespaceSchema):\n   - src/cli.ts:25-40\n   - core/src/index.ts:524-557\n\nCreate a shared types file or package to eliminate duplication.","status":"closed","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-25T03:53:30.260957-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T17:21:05.504143-06:00","closed_at":"2026-02-01T17:21:05.504143-06:00","close_reason":"Analyzed - no duplicates found, types are intentionally different"}
{"id":"rpc.do-z00","title":"TS: Replace remaining any types in public APIs","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T05:22:44.480646-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T06:32:55.730819-06:00","closed_at":"2026-02-02T06:32:55.730819-06:00","close_reason":"Closed"}
{"id":"rpc.do-zpo","title":"Clear _currentRequest after request processing","description":"core/src/index.ts:735 - _currentRequest = request is set but never cleared. Persists across WebSocket messages and HTTP requests to same DO. Middleware/context may see stale request from different client.","status":"closed","priority":3,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:53:48.527571-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T07:16:23.440182-06:00","closed_at":"2026-02-02T07:16:23.440182-06:00","close_reason":"Closed"}
{"id":"rpc.do-zq3","title":"Simplify main README to focus on quick start","description":"The current README is comprehensive but overwhelming (~600 lines). For npm discoverability:\n1. Create concise README (~100 lines) with quick start only\n2. Move detailed docs to /docs/ directory\n3. Add clear CTAs to full documentation\n4. Include comparison chart (bundle size vs competitors)\n\nKey sections to keep:\n- 5-line quick start\n- Feature highlights (3-4 bullets)\n- Simple code example\n- Link to full docs","status":"closed","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","estimated_minutes":120,"created_at":"2026-02-02T05:23:38.667976-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T05:36:07.906573-06:00","closed_at":"2026-02-02T05:36:07.906573-06:00","close_reason":"Simplified README from 591 to 146 lines, moved details to docs/API_REFERENCE.md","labels":["docs","v1.0-blocker"]}
{"id":"rpc.do-zt0","title":"Add max queue size to ReconnectingWebSocketTransport","description":"src/transports/reconnecting-ws.ts:169 - messageQueue and sendQueue grow without bound during disconnection. Add a maxQueueSize option (default ~1000) and either reject sends or drop oldest messages when limit reached.","status":"closed","priority":1,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T06:53:14.184355-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T07:09:39.817028-06:00","closed_at":"2026-02-02T07:09:39.817028-06:00","close_reason":"Closed","labels":["rpc.do-82f"]}
{"id":"rpc.do-zxb","title":"TS: Add return type annotations to complex functions","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-02T05:23:29.084177-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-02T08:44:29.503942-06:00","closed_at":"2026-02-02T08:44:29.503942-06:00","close_reason":"Closed"}
